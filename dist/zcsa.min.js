"use strict";jQuery(document).ready(function(e){function o(){for(var o=0;o<c.length;o++)c[o].addEventListener("click",function(){console.log("clicked!",this.value);var o=document.getElementById(this.value);e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"remove_zips",zip_code:this.value,security:SERVICE_AREA.security},beforeSend:function(){console.log("before")},success:function(t){e("#serviceAreaMessage").remove(),o.remove(),e("#wpbody h1").after("<div id='serviceAreaMessage' class='notice notice-success'><p>Success</p></div>")},error:function(o,t,s){console.log("Error"),e("#serviceAreaMessage").remove(),console.log(SERVICE_AREA.error),console.log(o.responseText),e("#wpbody h1").after("<div id='serviceAreaMessage' class='notice notice-error'><p>"+o.responseText+"</p></div>")}})})}function t(t){null===localStorage.getItem("theZipCodes")?console.log("No localStorage yet, requesting"):(console.log("Killing Old localStorage"),localStorage.removeItem("theZipCodes")),console.log("Looking for Zip:",t);var s="js-WT0k29FD4av1VcIhRv0XvT9O2AhYU4xQXyb0HQDM19OWmwed2ebx7lmaVD8PIGGG",r="https://www.zipcodeapi.com/rest/"+s+"/radius.json/"+t+"/"+a.value+"/mile",c=new XMLHttpRequest;c.open("GET",encodeURI(r)),c.onload=function(t){if(200===c.status){var s=JSON.parse(c.responseText),r=[];for(var i in s.zip_codes)r.push(s.zip_codes[i].zip_code);localStorage.setItem("theZipCodes",r);var n=r.toString();console.log("We've got the zip codes!",n),t=document.getElementById("zipCode"),e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"save_zips",zip_code:t.value,zip_matches:r.toString(),zip_radius:a.value,security:SERVICE_AREA.security},beforeSend:function(){console.log("before")},success:function(s){e("#serviceAreaMessage").remove(),e("tbody#serviceAreas tr:last-of-type").after("<tr id='"+t.value+"'><td class='remove-service_area'><button class='dashicons dashicons-no-alt button removeButton' value='"+t.value+"'></button></td><td class='row-title'><label for='tablecell'>"+t.value+"</label></td><td>"+a.value+"</td><td style='word-break: break-word;'><p>"+r.toString()+"</p></td></tr>"),o(),e("#wpbody h1").after("<div id='serviceAreaMessage' class='notice notice-success'><p>Success</p></div>")},error:function(o,t,s){console.log("Error"),e("#serviceAreaMessage").remove(),console.log(SERVICE_AREA.error),console.log(o.responseText),e("#wpbody h1").after("<div id='serviceAreaMessage' class='notice notice-error'><p>"+o.responseText+"</p></div>")}})}else{var l="Request failed.  Returned status of "+c.status+". (Possibly an invalid zip code)";console.log(l),e("#wpbody h1").after("<div id='serviceAreaMessage' class='notice notice-error'><p>"+l+"</p></div>")}},c.send()}var s=document.getElementById("addServiceAreaButton"),r=document.getElementById("zipCode"),a=document.getElementById("zipRadius"),c=document.getElementsByClassName("removeButton");o(),s.addEventListener("click",function(){event.preventDefault(),t(r.value)})});